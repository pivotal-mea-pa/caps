---
platform: linux

image_resource:
  type: docker-image
  source:
    repository: appbricks/automation-tools

inputs:
- name: automation
- name: automation-extensions
- name: terraform-output

run:
  path: automation/lib/tasks/opsman/common/configure-product.sh

params:
  TRACE:
  OPSMAN_HOST:
  OPSMAN_CLIENT_ID:
  OPSMAN_CLIENT_SECRET:
  OPSMAN_USERNAME:
  OPSMAN_PASSWORD:
  # Product configuration
  PRODUCT_NAME: pivotal-mysql
  TEMPLATE_PATH: automation/lib/pipelines/pcf/install-and-upgrade/templates/mysql-dedicated
  TEMPLATE_OVERRIDE_PATH:
  # Networking
  NETWORK_NAME:
  SERVICE_NETWORK_NAME:
  SINGLETON_AVAILABILITY_ZONE:
  OTHER_AVAILABILITY_ZONES:
  # Resources
  INTERNET_CONNECTED:
  # Properties
  PLAN_1_MULTI_NODE_DEPLOYMENT:
  PLAN_1_SERVICE_PLAN_ACCESS:
  PLAN_1_INSTANCE_LIMIT:
  PLAN_2_MULTI_NODE_DEPLOYMENT:
  PLAN_2_SERVICE_PLAN_ACCESS:
  PLAN_2_INSTANCE_LIMIT:
  PLAN_3_MULTI_NODE_DEPLOYMENT:
  PLAN_3_SERVICE_PLAN_ACCESS:
  PLAN_3_INSTANCE_LIMIT:
  S3_BACKUP_ACCESS_KEY_ID:
  S3_BACKUP_SECRET_ACCESS_KEY:
  S3_BACKUP_ENDPOINT_URL:
  S3_BACKUP_REGION:
  S3_BACKUP_BUCKET_NAME:
  S3_BACKUP_PATH:
  SCP_BACKUP_USER:
  SCP_BACKUP_SERVER:
  SCP_BACKUP_DESTINATION:
  SCP_BACKUP_FINGERPRINT:
  SCP_BACKUP_KEY:
  SCP_BACKUP_PORT:
  GCS_BACKUP_PROJECT_ID:
  GCS_BACKUP_BUCKET_NAME:
  GCS_BACKUP_SERVICE_ACCOUNT_JSON:
  AZURE_BACKUP_ACCOUNT:
  AZURE_BACKUP_STORAGE_ACCESS_KEY:
  AZURE_BACKUP_PATH:
  AZURE_BACKUP_CONTAINER:
  AZURE_BACKUP_BLOB_STORE_BASE_URL:
  BACKUP_CRON_SCHEDULE:
  ENABLE_BACKUP_EMAIL_ALERTS:
  SYSLOG_ADDRESS:
  SYSLOG_PORT:
  SYSLOG_TRANSPORT:
  SYSLOG_TLS:
  SYSLOG_PERMITTED_PEER:
  SYSLOG_CA_CERT:
  AVAILABILITY_ZONES:
